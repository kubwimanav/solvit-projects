<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Responsive User Table</title>
  <link rel="stylesheet" href="admin.css" />
</head>
<body>
  <button class="menu-toggle">
    <span></span><span></span><span></span>
  </button>
  <div class="overlay"></div>

  <div class="container">
    <h2>Dashboard</h2>
    <p>welcome to admin dashboard</p>
    <nav>
      <ul>
        <li><a href="#user">Users</a></li>
      </ul>
      <button id="logout-btn">Logout</button>
    </nav>
  </div>

  <div class="main-content" id="User">
    <div id="totaluser">
      <h4>All Users</h4>
      <p>Total Users: <strong>0</strong></p>
    </div>

    <div class="table-container"> 
      <div class="table-wrapper">
        <table>
          <thead>
            <tr>
              <th>ID</th>
              <th>Username</th>
              <th>Role</th>
            </tr>
          </thead>
          <tbody id="user-table-body"> 
          </tbody>
        </table>
      </div> 
      <div class="mobile-cards" id="mobile-cards"> 
      </div>
      <p></p>
    </div>
  </div>

  <script>
  // Mobile menu toggle
  const menuToggle = document.querySelector(".menu-toggle");
  const container = document.querySelector(".container");
  const overlay = document.querySelector(".overlay");

  menuToggle?.addEventListener("click", () => {
    container.classList.toggle("active");
    overlay.classList.toggle("active");
  });

  overlay?.addEventListener("click", () => {
    container.classList.remove("active");
    overlay.classList.remove("active");
  });

  const navLinks = document.querySelectorAll(".container ul li a");
  navLinks.forEach((link) => {
    link.addEventListener("click", () => {
      container.classList.remove("active");
      overlay.classList.remove("active");
    });
  });


  document.addEventListener("DOMContentLoaded", () => {
    const users = JSON.parse(localStorage.getItem("users")) || [];

    
    const totalUserElement = document.querySelector("#totaluser p strong");
    totalUserElement.textContent = users.length;
    const tableBody = document.getElementById("user-table-body");
    tableBody.innerHTML = "";
    users.forEach((user) => {
      const row = document.createElement("tr");
      row.innerHTML = `
        <td>${user.id}</td>
        <td>${user.username}</td>
        <td><span>${user.role}</span></td>
      `;
      tableBody.appendChild(row);
    });

    const cardContainer = document.getElementById("mobile-cards");
    cardContainer.innerHTML = "";
    users.forEach((user) => {
      const card = document.createElement("div");
      card.className = "user-card";
      card.innerHTML = `
        <div class="card-header">
          <div class="user-name">${user.username}</div>
          <div class="user-id">ID: ${user.id}</div>
        </div>
        <div class="user-role">
          <span class="role-badge role-${user.role.toLowerCase()}">${user.role}</span>
        </div>
      `;
      cardContainer.appendChild(card);
    });
  });

  document.getElementById("logout-btn").addEventListener("click", () => {
    localStorage.removeItem("loggedInUser");
    alert("Logged out successfully");
    window.location.href = "./index.html"; 
  });

</script>

</body>
</html>
